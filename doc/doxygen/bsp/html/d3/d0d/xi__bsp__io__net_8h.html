<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xively: xi_bsp_io_net.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xively
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_892c6830e89bd42b86edfc698815ae23.html">bsp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">xi_bsp_io_net.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
</div>
<p><a href="../../d3/d0d/xi__bsp__io__net_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/deb/structxi__bsp__socket__events__s.html">xi_bsp_socket_events_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ab28e0e22706e2676e96444a31c0d3780"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a9dd6bfbd48b84d4f5eee3d13530a96e0">xi_bsp_io_net_state_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a></td></tr>
<tr class="separator:ab28e0e22706e2676e96444a31c0d3780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29c7b9c9d017806be8471ad3395ee2f9"><td class="memItemLeft" align="right" valign="top">typedef intptr_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a></td></tr>
<tr class="separator:a29c7b9c9d017806be8471ad3395ee2f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e88b27842cef994b2a00da0a2a567f2"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d5/deb/structxi__bsp__socket__events__s.html">xi_bsp_socket_events_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a1e88b27842cef994b2a00da0a2a567f2">xi_bsp_socket_events_t</a></td></tr>
<tr class="separator:a1e88b27842cef994b2a00da0a2a567f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a9dd6bfbd48b84d4f5eee3d13530a96e0"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a9dd6bfbd48b84d4f5eee3d13530a96e0">xi_bsp_io_net_state_e</a> { <br />
&#160;&#160;<a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a9dd6bfbd48b84d4f5eee3d13530a96e0ae02b038e734604ff471e33a98bfd6d37">XI_BSP_IO_NET_STATE_OK</a> = 0, 
<a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a9dd6bfbd48b84d4f5eee3d13530a96e0af3f86b40ca64f990164b58b5492e0226">XI_BSP_IO_NET_STATE_ERROR</a> = 1, 
<a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a9dd6bfbd48b84d4f5eee3d13530a96e0a89830714982b0450d07f299e611a875d">XI_BSP_IO_NET_STATE_BUSY</a> = 2, 
<a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a9dd6bfbd48b84d4f5eee3d13530a96e0af3542122e709d01466aa9a249f3e9937">XI_BSP_IO_NET_STATE_CONNECTION_RESET</a> = 3, 
<br />
&#160;&#160;<a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a9dd6bfbd48b84d4f5eee3d13530a96e0a7e0763c164966c0d27f3df9d7aa58da4">XI_BSP_IO_NET_STATE_TIMEOUT</a> = 4
<br />
 }</td></tr>
<tr class="separator:a9dd6bfbd48b84d4f5eee3d13530a96e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2858ee7ce819f76c700a60d11a8cb869"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a2858ee7ce819f76c700a60d11a8cb869">xi_bsp_io_net_select</a> (<a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a1e88b27842cef994b2a00da0a2a567f2">xi_bsp_socket_events_t</a> *socket_events_array, size_t socket_events_array_size, long timeout_sec)</td></tr>
<tr class="separator:a2858ee7ce819f76c700a60d11a8cb869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adab3456bbb095da463df76c70d814fc1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#adab3456bbb095da463df76c70d814fc1">xi_bsp_io_net_create_socket</a> (<a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a> *xi_socket_nonblocking)</td></tr>
<tr class="separator:adab3456bbb095da463df76c70d814fc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fc93de277658515a540e0022de87191"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a0fc93de277658515a540e0022de87191">xi_bsp_io_net_connect</a> (<a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a> *xi_socket_nonblocking, const char *host, uint16_t port)</td></tr>
<tr class="separator:a0fc93de277658515a540e0022de87191"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6248af37254ecde607f6c8879e9eac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#aba6248af37254ecde607f6c8879e9eac">xi_bsp_io_net_connection_check</a> (<a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a> xi_socket_nonblocking, const char *host, uint16_t port)</td></tr>
<tr class="separator:aba6248af37254ecde607f6c8879e9eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8ab3914fa812540c24404c700c92d00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ad8ab3914fa812540c24404c700c92d00">xi_bsp_io_net_write</a> (<a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a> xi_socket_nonblocking, int *out_written_count, const uint8_t *buf, size_t count)</td></tr>
<tr class="separator:ad8ab3914fa812540c24404c700c92d00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e84e7d7b72b759eeff20a70369173d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a3e84e7d7b72b759eeff20a70369173d1">xi_bsp_io_net_read</a> (<a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a> xi_socket_nonblocking, int *out_read_count, uint8_t *buf, size_t count)</td></tr>
<tr class="separator:a3e84e7d7b72b759eeff20a70369173d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3334c06a6f9289764982e15e09f3541"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab3334c06a6f9289764982e15e09f3541">xi_bsp_io_net_close_socket</a> (<a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a> *xi_socket_nonblocking)</td></tr>
<tr class="separator:ab3334c06a6f9289764982e15e09f3541"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Xively Client's Board Support Platform (BSP) for Asynchronous Networking. </p>
<p>This file defines the API of an asynchronous platform specific networking implementation. These are all the functions one should implement on a platform to make Xively Client able to do network communication.</p>
<p>These functions are supposed to be implemented in a non-blocking fashion. This means that these function should fit into a coopeartive-multitasking environment.</p>
<p>A basic call flow looks like this: create_socket, connect, connection_check, some iterations of read-write operations then close_socket at the end. </p>

<p class="definition">Definition in file <a class="el" href="../../d3/d0d/xi__bsp__io__net_8h_source.html">xi_bsp_io_net.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="ab28e0e22706e2676e96444a31c0d3780"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab28e0e22706e2676e96444a31c0d3780">&#9670;&nbsp;</a></span>xi_bsp_io_net_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a9dd6bfbd48b84d4f5eee3d13530a96e0">xi_bsp_io_net_state_e</a>  <a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1e88b27842cef994b2a00da0a2a567f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e88b27842cef994b2a00da0a2a567f2">&#9670;&nbsp;</a></span>xi_bsp_socket_events_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d5/deb/structxi__bsp__socket__events__s.html">xi_bsp_socket_events_s</a>  <a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a1e88b27842cef994b2a00da0a2a567f2">xi_bsp_socket_events_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a29c7b9c9d017806be8471ad3395ee2f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29c7b9c9d017806be8471ad3395ee2f9">&#9670;&nbsp;</a></span>xi_bsp_socket_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Xively Client BSP NET's socket representation type. </p>
<p>The Xively Client BSP NET solution stores platform specific socket representations in a variable of this type. That typed variable will be passed along the BSP's functions to keep track of the socket in question. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d0d/xi__bsp__io__net_8h_source.html#l00144">144</a> of file <a class="el" href="../../d3/d0d/xi__bsp__io__net_8h_source.html">xi_bsp_io_net.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a9dd6bfbd48b84d4f5eee3d13530a96e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dd6bfbd48b84d4f5eee3d13530a96e0">&#9670;&nbsp;</a></span>xi_bsp_io_net_state_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a9dd6bfbd48b84d4f5eee3d13530a96e0">xi_bsp_io_net_state_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return value of the BSP NET API functions. </p>
<p>The implementation reports internal status to Xively Client through these values. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a9dd6bfbd48b84d4f5eee3d13530a96e0ae02b038e734604ff471e33a98bfd6d37"></a>XI_BSP_IO_NET_STATE_OK&#160;</td><td class="fielddoc"><p>operation finished successfully </p>
</td></tr>
<tr><td class="fieldname"><a id="a9dd6bfbd48b84d4f5eee3d13530a96e0af3f86b40ca64f990164b58b5492e0226"></a>XI_BSP_IO_NET_STATE_ERROR&#160;</td><td class="fielddoc"><p>operation failed </p>
</td></tr>
<tr><td class="fieldname"><a id="a9dd6bfbd48b84d4f5eee3d13530a96e0a89830714982b0450d07f299e611a875d"></a>XI_BSP_IO_NET_STATE_BUSY&#160;</td><td class="fielddoc"><p>resource is busy, means: please invoke this function again later </p>
</td></tr>
<tr><td class="fieldname"><a id="a9dd6bfbd48b84d4f5eee3d13530a96e0af3542122e709d01466aa9a249f3e9937"></a>XI_BSP_IO_NET_STATE_CONNECTION_RESET&#160;</td><td class="fielddoc"><p>connection lost during read or write operation </p>
</td></tr>
<tr><td class="fieldname"><a id="a9dd6bfbd48b84d4f5eee3d13530a96e0a7e0763c164966c0d27f3df9d7aa58da4"></a>XI_BSP_IO_NET_STATE_TIMEOUT&#160;</td><td class="fielddoc"><p>timeout has appeared during the operation </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d3/d0d/xi__bsp__io__net_8h_source.html#l00122">122</a> of file <a class="el" href="../../d3/d0d/xi__bsp__io__net_8h_source.html">xi_bsp_io_net.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab3334c06a6f9289764982e15e09f3541"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3334c06a6f9289764982e15e09f3541">&#9670;&nbsp;</a></span>xi_bsp_io_net_close_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a> xi_bsp_io_net_close_socket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a> *&#160;</td>
          <td class="paramname"><em>xi_socket_nonblocking</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Closes the socket.</p>
<p>Platform dependent socket close implementation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">xi_socket_nonblocking</td><td>the socket to be closed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XI_BSP_IO_NET_STATE_OK - if socket closed successfully</li>
<li>XI_BSP_IO_NET_STATE_ERROR - otherwise </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a0fc93de277658515a540e0022de87191"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fc93de277658515a540e0022de87191">&#9670;&nbsp;</a></span>xi_bsp_io_net_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a> xi_bsp_io_net_connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a> *&#160;</td>
          <td class="paramname"><em>xi_socket_nonblocking</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Connects the socket to an endpoint defined by the parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">xi_socket_nonblocking</td><td>the socket which needs to be connected (generated by xi_bsp_io_net_create_socket function) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Null terminated IP or FQDN of the host to connect to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>the port number of the endpoint </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XI_BSP_IO_NET_STATE_OK - if successfully connected</li>
<li>XI_BSP_IO_NET_STATE_ERROR - otherwise </li>
</ul>
</dd></dl>

</div>
</div>
<a id="aba6248af37254ecde607f6c8879e9eac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba6248af37254ecde607f6c8879e9eac">&#9670;&nbsp;</a></span>xi_bsp_io_net_connection_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a> xi_bsp_io_net_connection_check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a>&#160;</td>
          <td class="paramname"><em>xi_socket_nonblocking</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Reports to the Xively Client whether the provided socket is connected.</p>
<p>This is called after the 'connect' function. Depending on return value Xively Client starts to use (read/write) this socket or reports a failed connection to the client Application.</p>
<p>The two separate functions (connect and connection_check) might be confusing. The asynchronous property of the Xively Client requires the separation of these functions. Actual socket connection is performed in the time between these two function calls, when select will be called on POSIX platforms, and networking tick operations invoked on No-OS devcies.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">xi_socket_nonblocking</td><td>connection check is performed on this socket </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">host</td><td>Null terminated IP or FQDN of the host to connect to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>the port number of the endpoint </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XI_BSP_IO_NET_STATE_OK - if socket is successfully connected</li>
<li>XI_BSP_IO_NET_STATE_ERROR - otherwise </li>
</ul>
</dd></dl>

</div>
</div>
<a id="adab3456bbb095da463df76c70d814fc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adab3456bbb095da463df76c70d814fc1">&#9670;&nbsp;</a></span>xi_bsp_io_net_create_socket()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a> xi_bsp_io_net_create_socket </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a> *&#160;</td>
          <td class="paramname"><em>xi_socket_nonblocking</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Creates the non-blocking socket.</p>
<p>Creates the platform specific non-blocking socket and stores in it in the function parameter xi_socket_nonblocking.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">xi_socket_nonblocking</td><td>the platform specific socket representation should be stored in this variable. This value will be passed along further BSP function calls. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XI_BSP_IO_NET_STATE_OK - if socket created successfully</li>
<li>XI_BSP_IO_NET_STATE_ERROR - otherwise </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a3e84e7d7b72b759eeff20a70369173d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e84e7d7b72b759eeff20a70369173d1">&#9670;&nbsp;</a></span>xi_bsp_io_net_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a> xi_bsp_io_net_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a>&#160;</td>
          <td class="paramname"><em>xi_socket_nonblocking</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>out_read_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Reads data from the socket.</p>
<p>Xively Client calls this function if data is expected to arrive on the socket. This shouldn't block as well. It is up to the implementation how many bytes to read at once which does not block the operation flow for too much time. If Xively Client requires more data this function will be called again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">xi_socket_nonblocking</td><td>data is read from this socket </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out_read_count</td><td>upon return this should contain the number of read bytes </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buf</td><td>upon return this buffer should contain the read bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>available capacity of the buffer. Maximum this number of bytes can be stored in the buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XI_BSP_IO_NET_STATE_OK - some bytes were read from the socket, number of bytes should be set properly. 0 &lt; *out_read_count</li>
<li>XI_BSP_IO_NET_STATE_BUSY - if no data is available on the socket currently. This will cause Xively Client to revisit this function later on. *out_read_count == 0</li>
<li>XI_BSP_IO_NET_STATE_ERROR - error occurred during the read operation </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a2858ee7ce819f76c700a60d11a8cb869"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2858ee7ce819f76c700a60d11a8cb869">&#9670;&nbsp;</a></span>xi_bsp_io_net_select()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a> xi_bsp_io_net_select </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a1e88b27842cef994b2a00da0a2a567f2">xi_bsp_socket_events_t</a> *&#160;</td>
          <td class="paramname"><em>socket_events_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>socket_events_array_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>timeout_sec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Provides a method for the Xively library to query socket states. These states will be used by the Xively Client Library to schedule various read and write operations as the library communicates with the Xively Messaging Gateway.</p>
<p>The function is passed an array of socket descriptors as were returned by the xi_bsp_io_net_create_socket call. Each element in the array corresponds to a specific socket, and contains an initialized xi_bsp_socket_state_t structure to be filled out by this BSP implementation.</p>
<p>The BSP function should invoke functions in the native socket library to query the state of the socket and fill in the corresponding fields in xi_bsp_socket_state_t for that descriptor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket_events_array</td><td>an array of sockets and sockets' events </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">socket_events_array_size</td><td>size of the socket_events_array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>used for passive waiting function must not wait longer than the given timeout ( in seconds )</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XI_BSP_IO_NET_STATE_OK - if select call updated any socket event</li>
<li>XI_BSP_IO_NET_STATE_TIMEOUT - if select call has encountered timeout</li>
<li>XI_BSP_IO_NET_STATE_ERROR - if select call finished with error </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ad8ab3914fa812540c24404c700c92d00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8ab3914fa812540c24404c700c92d00">&#9670;&nbsp;</a></span>xi_bsp_io_net_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#ab28e0e22706e2676e96444a31c0d3780">xi_bsp_io_net_state_t</a> xi_bsp_io_net_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d0d/xi__bsp__io__net_8h.html#a29c7b9c9d017806be8471ad3395ee2f9">xi_bsp_socket_t</a>&#160;</td>
          <td class="paramname"><em>xi_socket_nonblocking</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>out_written_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Sends data on the socket.</p>
<p>The Xively Client calls this function if there is data to send. As the other functions this shouldn't block as well. This function should write as many bytes in a chunk which does not break the normal operation of Xively Client. Keep in mind that as long as this function doesn't return no other event occurs and processed by Xively Client. Out parameter and return value can tell the unfinished state of the send operation. If that occurs this same function will be called again later on with remaining data. Between the subsequent calls the system is able to perform any other actions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">xi_socket_nonblocking</td><td>data is sent on this socket </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out_written_count</td><td>upon return this should contain the number of sent bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>the data to send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">count</td><td>number of bytes to send from the buffer. This is the size of the buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XI_BSP_IO_NET_STATE_OK - if the whole buffer is sent. i.e. #count bytes are sent. *out_written_count == count</li>
<li>XI_BSP_IO_NET_STATE_BUSY - if not the whole buffer is sent. This return value tells the system to call this function again with remaining data. *out_written_count &lt; count. Outgoing prameter number of written bytes must be set properly!</li>
<li>XI_BSP_IO_NET_STATE_ERROR - error occurred during the write operation </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
