<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Xively: xi_bsp_tls.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Xively
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_892c6830e89bd42b86edfc698815ae23.html">bsp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">xi_bsp_tls.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div>
<p><a href="../../dc/d33/xi__bsp__tls_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d44/structxi__bsp__tls__init__params__s.html">xi_bsp_tls_init_params_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a28615347e71326908efa492a109993f2"><td class="memItemLeft" align="right" valign="top">typedef enum <a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#af3e5dfa15d7761a0be40e74fec13cbf2">xi_bsp_tls_state_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a></td></tr>
<tr class="separator:a28615347e71326908efa492a109993f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7588a663e9d0251065fde4d9cdb143e"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d2/d44/structxi__bsp__tls__init__params__s.html">xi_bsp_tls_init_params_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#ad7588a663e9d0251065fde4d9cdb143e">xi_bsp_tls_init_params_t</a></td></tr>
<tr class="separator:ad7588a663e9d0251065fde4d9cdb143e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa83ca272b03442bcbd6e104788ac6e05"><td class="memItemLeft" align="right" valign="top">typedef void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a></td></tr>
<tr class="separator:aa83ca272b03442bcbd6e104788ac6e05"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:af3e5dfa15d7761a0be40e74fec13cbf2"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#af3e5dfa15d7761a0be40e74fec13cbf2">xi_bsp_tls_state_e</a> { <br />
&#160;&#160;<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#af3e5dfa15d7761a0be40e74fec13cbf2a98a5cbb9fe933f1fbdd31978a21da4bb">XI_BSP_TLS_STATE_OK</a> = 0, 
<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#af3e5dfa15d7761a0be40e74fec13cbf2a8531c07cc46b8e2725f3c5cf961f7f33">XI_BSP_TLS_STATE_INIT_ERROR</a> = 1, 
<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#af3e5dfa15d7761a0be40e74fec13cbf2a974920d70063692b84fa21ee47ff4583">XI_BSP_TLS_STATE_CERT_ERROR</a> = 2, 
<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#af3e5dfa15d7761a0be40e74fec13cbf2ac8c38552a4a2355b9dcb64cb24efdc8b">XI_BSP_TLS_STATE_CONNECT_ERROR</a> = 3, 
<br />
&#160;&#160;<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#af3e5dfa15d7761a0be40e74fec13cbf2ac019aaf5c24974ddc504c703d2ba5318">XI_BSP_TLS_STATE_WANT_READ</a> = 4, 
<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#af3e5dfa15d7761a0be40e74fec13cbf2a17113dc65415000bbc4ab61147284813">XI_BSP_TLS_STATE_WANT_WRITE</a> = 5, 
<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#af3e5dfa15d7761a0be40e74fec13cbf2aa259c2b9c644e5482c316f34c8344090">XI_BSP_TLS_STATE_READ_ERROR</a> = 6, 
<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#af3e5dfa15d7761a0be40e74fec13cbf2a9dc0a30908d1a20828185b2e9cc4715c">XI_BSP_TLS_STATE_WRITE_ERROR</a> = 7
<br />
 }</td></tr>
<tr class="separator:af3e5dfa15d7761a0be40e74fec13cbf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2509a3c9c265728f737851379cb20080"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a2509a3c9c265728f737851379cb20080">xi_bsp_tls_init</a> (<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a> **tls_context, <a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#ad7588a663e9d0251065fde4d9cdb143e">xi_bsp_tls_init_params_t</a> *init_params)</td></tr>
<tr class="separator:a2509a3c9c265728f737851379cb20080"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96144298eb2ffc6b21701a884f2a93e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a96144298eb2ffc6b21701a884f2a93e6">xi_bsp_tls_cleanup</a> (<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a> **tls_context)</td></tr>
<tr class="separator:a96144298eb2ffc6b21701a884f2a93e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d38b577449adf0f989e3dae2d6ee7b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a7d38b577449adf0f989e3dae2d6ee7b4">xi_bsp_tls_connect</a> (<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a> *tls_context)</td></tr>
<tr class="separator:a7d38b577449adf0f989e3dae2d6ee7b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f77ced0e0720a7b4596f903e034edf0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a2f77ced0e0720a7b4596f903e034edf0">xi_bsp_tls_read</a> (<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a> *tls_context, uint8_t *data_ptr, size_t data_size, int *bytes_read)</td></tr>
<tr class="separator:a2f77ced0e0720a7b4596f903e034edf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cfc8177c0a2fd6a9ebd5fdc41573a9a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a6cfc8177c0a2fd6a9ebd5fdc41573a9a">xi_bsp_tls_pending</a> (<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a> *tls_context)</td></tr>
<tr class="separator:a6cfc8177c0a2fd6a9ebd5fdc41573a9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe48a327dbb118325cbef2a79fa28ae8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#abe48a327dbb118325cbef2a79fa28ae8">xi_bsp_tls_write</a> (<a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a> *tls_context, uint8_t *data_ptr, size_t data_size, int *bytes_written)</td></tr>
<tr class="separator:abe48a327dbb118325cbef2a79fa28ae8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c24829105e288e5bddfef491053acb9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a8c24829105e288e5bddfef491053acb9">xi_bsp_tls_recv_callback</a> (char *buf, int sz, void *context, int *bytes_sent)</td></tr>
<tr class="separator:a8c24829105e288e5bddfef491053acb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ed9c9245dfb526e8fca33b59b35067f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a5ed9c9245dfb526e8fca33b59b35067f">xi_bsp_tls_send_callback</a> (char *buf, int sz, void *context, int *bytes_sent)</td></tr>
<tr class="separator:a5ed9c9245dfb526e8fca33b59b35067f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Xively Client's Board Support Platform (BSP) for Transport Layer Security (TLS) </p>
<p>This file defines the API of a TLS implementation that the Xively Client would use to secure its connection to the Xively Message Broker. In order to build this secure connection you will need to implement these functions with the TLS library that you plan to use on your platform. A few implementations of the TLS BSP have been provided in source form for your reference.</p>
<p>These functions are supposed to be implemented in a non-blocking fashion. This means that these function should fit into a coopeartive-multitasking environment. Some functions like xi_bsp_tls_connect can be called multiple times. Those functions must be prepared for receiving WANT_READ and WANT_WRITE states. </p>

<p class="definition">Definition in file <a class="el" href="../../dc/d33/xi__bsp__tls_8h_source.html">xi_bsp_tls.h</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="aa83ca272b03442bcbd6e104788ac6e05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa83ca272b03442bcbd6e104788ac6e05">&#9670;&nbsp;</a></span>xi_bsp_tls_context_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Xively Client BSP TLS's context representation type. </p>
<p>The Xively Client BSP TLS solution can store context of a TLS library in this abstract form. Each BSP TLS function receives it later on as a parameter. The Xively Client is unaware of the actual content and structure thus does not read or write this context. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d33/xi__bsp__tls_8h_source.html#l00092">92</a> of file <a class="el" href="../../dc/d33/xi__bsp__tls_8h_source.html">xi_bsp_tls.h</a>.</p>

</div>
</div>
<a id="ad7588a663e9d0251065fde4d9cdb143e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7588a663e9d0251065fde4d9cdb143e">&#9670;&nbsp;</a></span>xi_bsp_tls_init_params_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#ad7588a663e9d0251065fde4d9cdb143e">xi_bsp_tls_init_params_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Xively Client BSP TLS init function parameters. </p>
<p>Contains information required during initialisation of TLS functionality. </p>

</div>
</div>
<a id="a28615347e71326908efa492a109993f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28615347e71326908efa492a109993f2">&#9670;&nbsp;</a></span>xi_bsp_tls_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef enum <a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#af3e5dfa15d7761a0be40e74fec13cbf2">xi_bsp_tls_state_e</a>  <a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="af3e5dfa15d7761a0be40e74fec13cbf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3e5dfa15d7761a0be40e74fec13cbf2">&#9670;&nbsp;</a></span>xi_bsp_tls_state_e</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#af3e5dfa15d7761a0be40e74fec13cbf2">xi_bsp_tls_state_e</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="af3e5dfa15d7761a0be40e74fec13cbf2a98a5cbb9fe933f1fbdd31978a21da4bb"></a>XI_BSP_TLS_STATE_OK&#160;</td><td class="fielddoc"><p>operation finished successfully </p>
</td></tr>
<tr><td class="fieldname"><a id="af3e5dfa15d7761a0be40e74fec13cbf2a8531c07cc46b8e2725f3c5cf961f7f33"></a>XI_BSP_TLS_STATE_INIT_ERROR&#160;</td><td class="fielddoc"><p>init operation failed </p>
</td></tr>
<tr><td class="fieldname"><a id="af3e5dfa15d7761a0be40e74fec13cbf2a974920d70063692b84fa21ee47ff4583"></a>XI_BSP_TLS_STATE_CERT_ERROR&#160;</td><td class="fielddoc"><p>ca certification validation failed </p>
</td></tr>
<tr><td class="fieldname"><a id="af3e5dfa15d7761a0be40e74fec13cbf2ac8c38552a4a2355b9dcb64cb24efdc8b"></a>XI_BSP_TLS_STATE_CONNECT_ERROR&#160;</td><td class="fielddoc"><p>error during connecting operation </p>
</td></tr>
<tr><td class="fieldname"><a id="af3e5dfa15d7761a0be40e74fec13cbf2ac019aaf5c24974ddc504c703d2ba5318"></a>XI_BSP_TLS_STATE_WANT_READ&#160;</td><td class="fielddoc"><p>io is busy wait for data </p>
</td></tr>
<tr><td class="fieldname"><a id="af3e5dfa15d7761a0be40e74fec13cbf2a17113dc65415000bbc4ab61147284813"></a>XI_BSP_TLS_STATE_WANT_WRITE&#160;</td><td class="fielddoc"><p>io buffer is full wait for signal </p>
</td></tr>
<tr><td class="fieldname"><a id="af3e5dfa15d7761a0be40e74fec13cbf2aa259c2b9c644e5482c316f34c8344090"></a>XI_BSP_TLS_STATE_READ_ERROR&#160;</td><td class="fielddoc"><p>error during reading operation </p>
</td></tr>
<tr><td class="fieldname"><a id="af3e5dfa15d7761a0be40e74fec13cbf2a9dc0a30908d1a20828185b2e9cc4715c"></a>XI_BSP_TLS_STATE_WRITE_ERROR&#160;</td><td class="fielddoc"><p>error during writing operation </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dc/d33/xi__bsp__tls_8h_source.html#l00035">35</a> of file <a class="el" href="../../dc/d33/xi__bsp__tls_8h_source.html">xi_bsp_tls.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a96144298eb2ffc6b21701a884f2a93e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96144298eb2ffc6b21701a884f2a93e6">&#9670;&nbsp;</a></span>xi_bsp_tls_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a> xi_bsp_tls_cleanup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a> **&#160;</td>
          <td class="paramname"><em>tls_context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Provides a method for the Xively library to clean the TLS library.</p>
<p>Must deallocate the TLS library's previously allocated resources. Must clean content of the *tls_context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">[in|out]</td><td>tls_context </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>XI_BSP_TLS_STATE_OK </dd></dl>

</div>
</div>
<a id="a7d38b577449adf0f989e3dae2d6ee7b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d38b577449adf0f989e3dae2d6ee7b4">&#9670;&nbsp;</a></span>xi_bsp_tls_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a> xi_bsp_tls_connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a> *&#160;</td>
          <td class="paramname"><em>tls_context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Implements the TLS connect functionality.</p>
<p>This function may be called several times by Xively Client library before the handshake is completed. This function shouldn't block it should just return XI_BSP_TLS_STATE_WANT_WRITE or XI_BSP_TLS_STATE_WANT_READ instead.</p>
<p>This function will send or receive data internally during it's execution so it will result in calling TLS library send and recv functions.</p>
<p>In case of any error this function must return XI_BSP_TLS_STATE_CONNECT_ERROR.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tls_context</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XI_BSP_TLS_STATE_OK in case of succesfully finished hanshake</li>
<li>XI_BSP_TLS_STATE_WANT_READ | XI_BSP_TLS_STATE_WANT_WRITE in case handshake requires to receive or sent more data in order to continue</li>
<li>XI_BSP_TLS_STATE_CERT_ERROR</li>
<li>XI_BSP_TLS_STATE_CONNECT_ERROR in case of failure </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a2509a3c9c265728f737851379cb20080"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2509a3c9c265728f737851379cb20080">&#9670;&nbsp;</a></span>xi_bsp_tls_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a> xi_bsp_tls_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a> **&#160;</td>
          <td class="paramname"><em>tls_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#ad7588a663e9d0251065fde4d9cdb143e">xi_bsp_tls_init_params_t</a> *&#160;</td>
          <td class="paramname"><em>init_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Provides a method for the Xively library to initialise a TLS library.</p>
<p>Initialises the TLS library and retuns its context through a tls_context parameter.</p>
<p>This function will be called before other BSP TLS functions. The implementation should return XI_BSP_TLS_STATE_OK in case of a success or XI_BSP_TLS_STATE_INIT_ERROR in case of a failure.</p>
<p>Content of the init_params will be destroyed after the xi_bsp_tls_init exits. Any data required from init_params to live outside the scope of this initialization function must be copied and stored by your implementation.</p>
<p>Xively Client library I/O implementation requires TLS library to register custom send and recv functions. These custom send and recv function then must call xi_bsp_tls_recv_callback and xi_bsp_tls_send_callback in order for the data to be sent or received correctly throught the Xively Client's I/O system. For more details please refer to our reference implementations for WolfSSL and MBEDTLS libraries.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">tls_context</td><td>pointer to a pointer to a xi_bsp_tls_context_t </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">init_params</td><td>data required for TLS library initialisation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XI_BSP_TLS_STATE_OK in case of success</li>
<li>XI_BSP_TLS_STATE_INIT_ERROR otherwise </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a6cfc8177c0a2fd6a9ebd5fdc41573a9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cfc8177c0a2fd6a9ebd5fdc41573a9a">&#9670;&nbsp;</a></span>xi_bsp_tls_pending()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xi_bsp_tls_pending </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a> *&#160;</td>
          <td class="paramname"><em>tls_context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Implements the TLS pending.</p>
<p>Implementation of this function should call TLSs library pending function. It should return the the number of bytes that are available to be read by the tls library's read function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tls_context</td><td>- context of the TLS library </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes available to read </dd></dl>

</div>
</div>
<a id="a2f77ced0e0720a7b4596f903e034edf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f77ced0e0720a7b4596f903e034edf0">&#9670;&nbsp;</a></span>xi_bsp_tls_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a> xi_bsp_tls_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a> *&#160;</td>
          <td class="paramname"><em>tls_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>bytes_read</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Implements the TLS read.</p>
<p>Implementation of this function should call TLSs library read function. It should also translate the result returned by TLS library read function to one of:</p><ul>
<li>XI_BSP_TLS_STATE_OK - whenever the read operation finished succesfully</li>
<li>XI_BSP_TLS_STATE_WANT_READ - whenver the read operation requires more data</li>
<li>XI_BSP_TLS_STATE_READ_ERROR - whenver any other error occured during the read operation</li>
</ul>
<p>Argument bytes_read should be set to a number of bytes actually read.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tls_context</td><td>- context of the TLS library </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_ptr</td><td>- ptr to a buffer pleaceholder for a received data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_size</td><td>- size of the buffer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">bytes_read</td><td>- number of bytes read via the TLS library read function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XI_BSP_TLS_STATE_OK</li>
<li>XI_BSP_TLS_STATE_WANT_READ</li>
<li>XI_BSP_TLS_STATE_READ_ERROR </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a8c24829105e288e5bddfef491053acb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c24829105e288e5bddfef491053acb9">&#9670;&nbsp;</a></span>xi_bsp_tls_recv_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a> xi_bsp_tls_recv_callback </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>bytes_sent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5ed9c9245dfb526e8fca33b59b35067f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ed9c9245dfb526e8fca33b59b35067f">&#9670;&nbsp;</a></span>xi_bsp_tls_send_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a> xi_bsp_tls_send_callback </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>bytes_sent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="abe48a327dbb118325cbef2a79fa28ae8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe48a327dbb118325cbef2a79fa28ae8">&#9670;&nbsp;</a></span>xi_bsp_tls_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#a28615347e71326908efa492a109993f2">xi_bsp_tls_state_t</a> xi_bsp_tls_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/d33/xi__bsp__tls_8h.html#aa83ca272b03442bcbd6e104788ac6e05">xi_bsp_tls_context_t</a> *&#160;</td>
          <td class="paramname"><em>tls_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>data_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>bytes_written</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<p>Implements the TLS write.</p>
<p>Implementation of this function should call TLSs library write function. It should also translate the result returned by TLS library write function to one of:</p><ul>
<li>XI_BSP_TLS_STATE_OK - whenever the operation finished succesfully</li>
<li>XI_BSP_TLS_STATE_WANT_WRITE - whenver the write operation wants to send more data</li>
<li>XI_BSP_TLS_STATE_READ_ERROR - whenver any other error occured during the write operation</li>
</ul>
<p>Argument bytes_written should be set to a number of bytes actually written.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tls_context</td><td>- context of the TLS library </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_ptr</td><td>- ptr to a buffer with data to be sent </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_size</td><td>- size of the buffer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">bytes_written</td><td>- number of bytes written via the TLS library write function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XI_BSP_TLS_STATE_OK</li>
<li>XI_BSP_TLS_STATE_WANT_WRITE</li>
<li>XI_BSP_TLS_STATE_READ_ERROR </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
